<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>UsRemind â€” Main Page</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&family=Lora:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    
    <style>
        /* Custom Colors (from your palette) */
        :root {
            --color-cream: #F5EFE6;
            --color-ink: #2B2B2F;
            --color-tangerine: #FF7A00;
            --color-mustard: #FFD200;
            --color-sky: #27C1F7;
            --color-leaf: #B6F39A;
            --color-coral: #FF7F41;
            --color-fuchsia: #FF4FB8;
            --color-blue-button: #2d9cff;
            --color-orange-ribbon: #ff8e2b;
            --color-light-bg-base: #1693ff; /* Body background */
            --color-white-pattern-blob: rgba(255,255,255,0.4);
            --color-white-pattern-blob-30: rgba(255,255,255,0.3);
            --color-white-pattern-blob-35: rgba(255,255,255,0.35);
            --color-text-ink-60: rgba(43,43,47,0.6);
            --color-text-ink-70: rgba(43,43,47,0.7);
            --color-text-ink-80: rgba(43,43,47,0.8);
            --color-text-white-80: rgba(255,255,255,0.8);
            --color-text-white-90: rgba(255,255,255,0.9);
            --color-black-10: rgba(0,0,0,0.1);
            --color-black-5: rgba(0,0,0,0.05);

            /* Dark Mode Colors (approximate, based on your principles) */
            --dark-color-ink: #F5F5F5; /* Light text for dark mode */
            --dark-color-cream: #2B2B2F; /* Darker cream for dark mode */
            --dark-color-light-bg-base: #121218; /* Soft dark background */
            --dark-color-main-card-bg: #1E1E1E; /* Soft dark for main container */
            --dark-color-blue-button: #4DAAFF;
            --dark-color-orange-ribbon: #FFB060;
            --dark-color-white-pattern-blob: rgba(255,255,255,0.1);
            --dark-color-black-10: rgba(255,255,255,0.1);
            --dark-color-black-5: rgba(255,255,255,0.05);
            --dark-color-text-muted: rgba(255,255,255,0.6);
            --dark-color-text-light: rgba(255,255,255,0.9);

            /* Specific feature colors (adjusted for dark mode) */
            --color-birthday-banner-bg: #FFD700;
            --color-birthday-banner-text: #8B4513;
            --color-modal-overlay-bg: rgba(0, 0, 0, 0.4); /* Adjusted for less dimness */
            --color-modal-bg: #ffffff;
            --color-modal-close-btn: #888;
            --color-cursor: #2B2B2F; /* Ink color for cursor */
            --color-birthday-alert: #FF4500; /* Original alert color for contrast */

            --dark-color-birthday-banner-bg: #B8860B; /* Darker gold for dark mode */
            --dark-color-birthday-banner-text: #FFD700; /* Lighter text for dark mode */
            --color-modal-overlay-dark: rgba(0, 0, 0, 0.5); /* Adjusted for less dimness in dark mode */
            --color-modal-bg-dark: #2A2A2A;
            --dark-color-modal-close-btn: #AAA;
            --dark-color-tangerine: #FF7A00; /* Keep tangerine for alert in dark mode */

            /* Custom message box colors */
            --color-message-box-bg: #333;
            --color-message-box-text: #fff;
            --color-message-box-info: #2196F3;
            --color-message-box-success: #4CAF50;
            --color-message-box-error: #F44336;
        }

        html.dark-mode {
            --color-ink: var(--dark-color-ink);
            --color-cream: var(--dark-color-cream);
            --color-light-bg-base: var(--dark-color-light-bg-base);
            --color-main-card-bg: var(--dark-color-main-card-bg);
            --color-blue-button: var(--dark-color-blue-button);
            --color-orange-ribbon: var(--dark-color-orange-ribbon);
            --color-white-pattern-blob: var(--dark-color-white-pattern-blob);
            --color-white-pattern-blob-30: var(--dark-color-white-pattern-blob);
            --color-white-pattern-blob-35: var(--dark-color-white-pattern-blob);
            --color-text-ink-60: var(--dark-color-text-muted);
            --color-text-ink-70: var(--dark-color-text-muted);
            --color-text-ink-80: var(--dark-color-text-muted);
            --color-text-white-80: var(--dark-color-text-light);
            --color-text-white-90: var(--dark-color-text-light);
            --color-black-10: rgba(255,255,255,0.1);
            --color-black-5: rgba(255,255,255,0.05);

            --color-birthday-banner-bg: var(--dark-color-birthday-banner-bg);
            --color-birthday-banner-text: var(--dark-color-birthday-banner-text);
            --color-modal-overlay-bg: var(--color-modal-overlay-dark);
            --color-modal-bg: var(--color-modal-bg-dark);
            --color-modal-close-btn: var(--dark-color-modal-close-btn);
            --color-cursor: var(--dark-color-ink); /* Cursor is light in dark mode */
            --color-birthday-alert: var(--color-birthday-alert); /* Keep original alert color for contrast */
        }

        body {
            margin: 0;
            /* Updated background for animated gradient */
            background: linear-gradient(135deg, var(--color-light-bg-base), var(--color-sky), var(--color-blue-button), #004d99, #00264d); /* Added darker blues */
            background-size: 400% 400%; /* Larger background to allow movement */
            animation: gradient-animation 20s ease infinite; /* Slower, smoother animation */
            font-family: 'Poppins', sans-serif;
            color: var(--color-ink);
            min-height: 100vh;
            display: flex;
            flex-direction: column; /* Allow content to stack vertically */
            justify-content: flex-start; /* Align content to the top */
            align-items: center;
            padding: 2.5rem 1.25rem; /* Re-added padding to body to show background */
            box-sizing: border-box;
            transition: background-color 0.5s ease, color 0.5s ease;
            cursor: none; /* Hide default cursor */
        }

        /* Gradient animation keyframes */
        @keyframes gradient-animation {
            0% { background-position: 0% 0%; }
            25% { background-position: 100% 0%; }
            50% { background-position: 100% 100%; }
            75% { background-position: 0% 100%; }
            100% { background-position: 0% 0%; }
        }

        /* Dark mode gradient adjustment */
        html.dark-mode body {
            background: linear-gradient(135deg, var(--dark-color-light-bg-base), #121218, #000000, #1a1a20, #0a0a10); /* Darker gradient for dark mode */
            background-size: 400% 400%;
            animation: gradient-animation 20s ease infinite;
        }


        /* Decorative ribbons */
        .ribbon-decoration {
            pointer-events: none;
            position: fixed;
            inset: 0;
            overflow: hidden;
        }
        .ribbon-decoration > div {
            position: absolute;
            background-color: var(--color-orange-ribbon);
            border-radius: 9999px;
        }
        .ribbon-decoration .ribbon-1 {
            left: -6rem; top: 25%; transform: rotate(-25deg);
            width: 26.25rem; height: 2.375rem;
        }
        .ribbon-decoration .ribbon-2 {
            right: -7rem; bottom: 2.5rem; transform: rotate(25deg);
            width: 20rem; height: 1.625rem;
        }
        .ribbon-decoration .slash-text {
            position: absolute; right: 2rem; bottom: 1.5rem;
            color: var(--color-text-white-80); font-size: 3.75rem; user-select: none;
        }
        html.dark-mode .ribbon-decoration > div {
            background-color: var(--dark-color-orange-ribbon);
        }
        html.dark-mode .ribbon-decoration .slash-text {
            color: var(--dark-color-text-white-80);
        }

        /* Main card container */
        .main-card-wrapper {
            position: relative;
            max-width: 72rem; /* 1152px */
            width: 100%; /* Take full width to center content */
            margin-left: auto;
            margin-right: auto;
            padding: 0; /* Removed horizontal padding from here, now handled by body */
            box-sizing: border-box;
        }
        @media (min-width: 768px) {
            .main-card-wrapper { padding: 0; } /* Ensure no padding on larger screens either */
        }

        /* This is the main visual container that now wraps everything */
        .main-card {
            margin-top: 0; /* Removed margin-top as it's now the primary container */
            background-color: var(--color-cream);
            border-radius: 2rem; /* 32px */
            box-shadow: 0 12px 24px rgba(0,0,0,0.08); /* soft shadow */
            overflow: hidden;
            position: relative;
            z-index: 10;
            transition: background-color 0.5s ease, box-shadow 0.5s ease;
            /* Padding for the entire content block */
            padding-bottom: 2.5rem; /* Add padding to the bottom of the main card */
        }
        html.dark-mode .main-card {
            background-color: var(--dark-color-main-card-bg);
            box-shadow: 0 12px 24px rgba(0,0,0,0.4); /* soft-dark shadow */
        }

        /* Soft pattern blobs */
        .pattern-blobs {
            pointer-events: none;
            position: absolute;
            inset: 0;
        }
        .pattern-blobs > div {
            position: absolute;
            background-color: var(--color-white-pattern-blob);
            border-radius: 9999px; /* full rounded for blobs */
        }
        .pattern-blobs .blob-1 { left: -2.5rem; top: 1.5rem; width: 11rem; height: 11rem; border-radius: 36% 64% 57% 43%/57% 43% 36% 64%; }
        .pattern-blobs .blob-2 { right: 1.5rem; top: 1.5rem; width: 9rem; height: 9rem; background-color: var(--color-white-pattern-blob-30); border-radius: 52% 48% 40% 60%/48% 60% 40% 52%; }
        .pattern-blobs .blob-3 { left: 2.5rem; bottom: 2.5rem; width: 12rem; height: 9rem; background-color: var(--color-white-pattern-blob-30); border-radius: 60% 40% 59% 41%/43% 57% 37% 63%; }
        .pattern-blobs .blob-4 { right: 2rem; bottom: 1.5rem; width: 8rem; height: 6rem; background-color: var(--color-white-pattern-blob-35); border-radius: 42% 58% 40% 60%/48% 52% 46% 54%; }
        html.dark-mode .pattern-blobs > div {
            background-color: var(--dark-color-white-pattern-blob);
        }

        /* NAV */
        .main-nav {
            position: relative; z-index: 10;
            padding: 1.25rem 1.5rem; /* 20px 24px */
            display: flex; align-items: center; justify-content: space-between;
            width: 100%; /* Ensure nav takes full width within its container */
            box-sizing: border-box; /* Include padding in width calculation */
        }
        @media (min-width: 768px) { .main-nav { padding-left: 2.5rem; padding-right: 2.5rem; } }

        .logo-group { display: flex; align-items: center; gap: 0.75rem; }
        .logo-icon { width: 2rem; height: 2rem; border-radius: 0.75rem; background: linear-gradient(to bottom right, var(--color-mustard), var(--color-coral)); }
        .logo-text { color: var(--color-ink); font-weight: 600; font-size: 1.125rem; }
        html.dark-mode .logo-text { color: var(--dark-color-ink); }

        .nav-links { display: flex; align-items: center; gap: 2rem; color: var(--color-ink); opacity: 0.8; }
        @media (max-width: 767px) { .nav-links { display: none; } } /* Hide on mobile */
        .nav-links a:hover { color: var(--color-ink); opacity: 1; }
        html.dark-mode .nav-links { color: var(--dark-color-ink); }
        html.dark-mode .nav-links a:hover { color: var(--dark-color-ink); }

        .nav-buttons { display: flex; align-items: center; gap: 0.75rem; }
        .nav-button-signup {
            display: none; /* Always hidden now */
        }

        /* Fixed Position Buttons (Theme, Birthday, Calendar) */
        .fixed-action-btn {
            position: fixed; top: 20px; width: 40px; height: 40px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center; font-size: 1.2rem;
            background-color: var(--color-blue-button); color: white; border: none;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 1000; cursor: pointer;
            transition: background-color 0.3s ease, color 0.3s ease, transform 0.2s ease;
        }
        .fixed-action-btn:hover { transform: scale(1.05); }
        html.dark-mode .fixed-action-btn { background-color: var(--dark-color-blue-button); color: var(--dark-color-ink); }

        .theme-toggle-btn { right: 20px; }
        .birthday-info-btn { right: 70px; }
        .calendar-info-btn { right: 120px; }

        @media (max-width: 767px) {
            .fixed-buttons-wrapper {
                position: static;
                display: flex;
                flex-wrap: wrap;
                justify-content: flex-end; /* Align to the right */
                gap: 0.5rem; /* Smaller gap on mobile */
            }
            .fixed-action-btn {
                position: static; /* Remove fixed positioning on mobile */
                margin-left: 0.5rem; /* Add some spacing */
                margin-right: 0.5rem;
            }
            .nav-buttons {
                display: flex;
                flex-wrap: wrap; /* Allow buttons to wrap */
                justify-content: flex-end; /* Align to the right */
                gap: 0.5rem; /* Smaller gap on mobile */
            }
            /* Adjust overall nav on small screens if needed */
            .main-nav {
                flex-wrap: wrap;
                justify-content: space-between;
                padding-bottom: 0.5rem; /* Add some padding below if buttons wrap */
            }
            /* Move fixed buttons to inside the nav-buttons container for mobile */
            .theme-toggle-btn, .birthday-info-btn, .calendar-info-btn {
                position: relative; /* Make them relative inside flex container */
                top: auto;
                right: auto;
            }
        }


        .birthday-info-btn.alert {
            animation: pulse-alert 1.5s infinite;
            background-color: var(--color-tangerine);
            color: white; /* Ensure text is white for alert */
        }
        html.dark-mode .birthday-info-btn.alert {
            background-color: var(--dark-color-tangerine);
        }
        @keyframes pulse-alert {
            0% { box-shadow: 0 0 0 0 rgba(255, 122, 0, 0.7); } /* Tangerine glow */
            70% { box-shadow: 0 0 0 10px rgba(255, 122, 0, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 122, 0, 0); }
        }

        /* HERO */
        .hero-section {
            position: relative;
            z-index: 10;
            text-align: center;
            padding: 0 1.5rem; /* Horizontal padding for content */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 80vh; /* Make it take up most of the viewport height */
            width: 100%; /* Ensure it takes full width */
            box-sizing: border-box; /* Include padding in width/height */
        }
        @media (min-width: 768px) { .hero-section { padding-left: 2.5rem; padding-right: 2.5rem; } }

        .hero-headline {
            font-size: 2.5rem; /* Increased font size */
            font-weight: 800;
            letter-spacing: -0.025em;
            color: var(--color-ink);
            margin-top: 0.5rem;
            line-height: 1.1; /* Tighter line height for impact */
        }
        @media (min-width: 768px) { .hero-headline { font-size: 4.5rem; } /* Larger on desktop */ }
        html.dark-mode .hero-headline { color: var(--dark-color-ink); }

        .hero-subtext {
            color: var(--color-ink);
            opacity: 0.6;
            margin-top: 1rem; /* More space below headline */
            font-size: 1.125rem; /* Slightly larger subtext */
            max-width: 600px; /* Limit width for readability */
        }
        html.dark-mode .hero-subtext { color: var(--dark-color-text-muted); }

        /* GRID */
        .main-grid-section {
            position: relative; z-index: 10;
            padding: 2.5rem 1.5rem 0; /* More padding at top to separate from hero, no bottom padding */
            width: 100%; /* Ensure it takes full width */
            box-sizing: border-box;
        }
        @media (min-width: 768px) { .main-grid-section { padding-left: 2.5rem; padding-right: 2.5rem; } }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(1, minmax(0, 1fr));
            gap: 1.5rem;
        }
        @media (min-width: 768px) { .grid-container { grid-template-columns: repeat(3, minmax(0, 1fr)); } }

        /* Card Styles */
        .card {
            border-radius: 1.5rem;
            padding: 1.5rem;
            box-shadow: 0 12px 24px rgba(0,0,0,0.08);
            position: relative; overflow: hidden;
            transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.5s ease, color 0.5s ease; /* Added transform to transition */
            cursor: pointer; /* Indicate clickable */
        }
        html.dark-mode .card { box-shadow: 0 12px 24px rgba(0,0,0,0.4); }

        /* Hover effect for all cards */
        .card:hover {
            transform: translateY(-5px); /* Lifts the card slightly */
            box-shadow: 0 16px 32px rgba(0,0,0,0.15); /* More pronounced shadow on hover */
        }
        html.dark-mode .card:hover {
            box-shadow: 0 16px 32px rgba(0,0,0,0.6); /* Darker shadow for dark mode */
        }

        /* New styles for expanded card */
        .card.is-expanded {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(1); /* Ensure it's not scaled down initially */
            width: 90vw; /* Take up 90% of viewport width */
            height: 90vh; /* Take up 90% of viewport height */
            max-width: 1200px; /* Optional: limit max size on very large screens */
            max-height: 800px; /* Optional: limit max height */
            z-index: 1002; /* Higher than fixed buttons, lower than modals */
            padding: 2rem; /* More padding when expanded */
            overflow-y: auto; /* Allow scrolling if content overflows */
            cursor: zoom-out; /* Indicate it's clickable to close */
            box-shadow: 0 25px 50px rgba(0,0,0,0.4); /* More prominent shadow */
            border: 2px solid var(--color-blue-button); /* Add a border for emphasis */
            filter: brightness(100%); /* Ensure full brightness when expanded */
        }

        html.dark-mode .card.is-expanded {
            box-shadow: 0 25px 50px rgba(0,0,0,0.8);
            border-color: var(--dark-color-blue-button);
        }

        /* Adjust content within expanded card if necessary */
        .card.is-expanded .card-title {
            font-size: 2rem; /* Larger title when expanded */
        }
        .card.is-expanded .card-body-text,
        .card.is-expanded .card-text-muted,
        .card.is-expanded .card-image-text,
        .card.is-expanded .weather-widget-content .text {
            font-size: 1.1rem; /* Slightly larger text when expanded */
            line-height: 1.4; /* Adjusted line height for expanded text */
            max-width: 100%; /* Allow full width for text in expanded state */
        }
        .card.is-expanded .card-image-placeholder {
            height: 250px; /* Larger image placeholder */
        }
        .card.is-expanded .weather-widget-content .icon {
            font-size: 4rem; /* Larger icon */
        }
        .card.is-expanded .flex.gap-3.mt-4.justify-center.flex-wrap {
            margin-top: 2rem; /* More space for buttons */
        }


        /* Backdrop for expanded card */
        .backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: var(--color-modal-overlay-bg); /* Use the new variable for backdrop opacity */
            z-index: 1000; /* Below expanded card, above other content */
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .backdrop.is-active {
            opacity: 1;
            visibility: visible;
        }

        /* Disable scrolling on body when card is expanded */
        body.no-scroll {
            overflow: hidden;
        }


        /* Specific Card Backgrounds and Text Colors */
        .card.bg-white { background-color: white; color: var(--color-ink); }
        html.dark-mode .card.bg-white { background-color: var(--dark-color-main-card-bg); color: var(--dark-color-ink); }

        .card.bg-tangerine { background-color: var(--color-tangerine); color: white; }
        html.dark-mode .card.bg-tangerine { background-color: var(--color-tangerine); }

        .card.bg-mustard { background-color: var(--color-mustard); color: var(--color-ink); }
        html.dark-mode .card.bg-mustard { background-color: var(--color-mustard); color: var(--dark-color-ink); }

        .card.bg-coral { background-color: var(--color-coral); color: white; }
        html.dark-mode .card.bg-coral { background-color: var(--color-coral); }

        .card.bg-sky { background-color: var(--color-sky); color: white; }
        html.dark-mode .card.bg-sky { background-color: var(--color-sky); }

        .card.bg-leaf { background-color: var(--color-leaf); color: var(--color-ink); }
        html.dark-mode .card.bg-leaf { background-color: var(--color-leaf); color: var(--dark-color-ink); }

        .card.bg-fuchsia { background-color: var(--color-fuchsia); color: white; }
        html.dark-mode .card.bg-fuchsia { background-color: var(--color-fuchsia); }

        /* Card Content Styling */
        .card-text-muted { color: var(--color-ink); opacity: 0.5; font-size: 0.875rem; }
        html.dark-mode .card-text-muted { color: var(--dark-color-text-muted); }

        .card-title { font-size: 1.5rem; font-weight: 600; line-height: 1.25; }
        @media (min-width: 768px) { .card-title-md { font-size: 1.875rem; } }

        .card-body-text { font-size: 0.875rem; margin-top: 0.5rem; }
        .card-body-text-white-90 { color: rgba(255,255,255,0.9); }

        /* Play Button */
        .play-button {
            width: 2.5rem; height: 2.5rem; border-radius: 9999px;
            background-color: var(--color-orange-ribbon); color: white;
            display: flex; align-items: center; justify-content: center;
        }
        html.dark-mode .play-button { background-color: var(--dark-color-orange-ribbon); }

        /* Progress Bar */
        .progress-bar-bg { width: 100%; height: 0.5rem; background-color: var(--color-black-10); border-radius: 9999px; }
        html.dark-mode .progress-bar-bg { background-color: var(--dark-color-black-10); }
        .progress-bar-fill { height: 100%; background-color: var(--color-blue-button); border-radius: 9999px; }
        html.dark-mode .progress-bar-fill { background-color: var(--dark-color-blue-button); }

        /* FOOTER STRIP */
        .footer-strip-section {
            position: relative; z-index: 10;
            padding: 0 1.5rem 0; /* Adjusted padding, removed bottom padding as main-card handles it */
            width: 100%; /* Ensure it takes full width */
            box-sizing: border-box;
            margin-top: 2.5rem; /* Add margin to separate from grid */
        }
        @media (min-width: 768px) { .footer-strip-section { padding-left: 2.5rem; padding-right: 2.5rem; } }

        .footer-strip {
            background-color: white;
            border-radius: 2rem;
            padding: 1.25rem 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 12px 24px rgba(0,0,0,0.08);
        }
        @media (min-width: 640px) { .footer-strip { flex-direction: row; } }
        html.dark-mode .footer-strip { background-color: var(--dark-color-main-card-bg); }

        .footer-text { color: var(--color-ink); font-weight: 600; font-size: 1.125rem; }
        html.dark-mode .footer-text { color: var(--dark-color-ink); }

        .footer-buttons { display: flex; gap: 0.75rem; margin-top: 0.75rem; }
        @media (min-width: 640px) { .footer-buttons { margin-top: 0; } }

        .footer-button-primary {
            background-color: var(--color-blue-button); color: white;
            font-weight: 600; padding: 0.75rem 1.25rem; border-radius: 9999px; box-shadow: 0 12px 24px rgba(0,0,0,0.08);
        }
        html.dark-mode .footer-button-primary { background-color: var(--dark-color-blue-button); }

        .footer-button-secondary {
            background-color: var(--color-black-5); color: var(--color-ink);
            font-weight: 600; padding: 0.75rem 1.25rem; border-radius: 9999px;
        }
        html.dark-mode .footer-button-secondary { background-color: var(--dark-color-black-10); color: var(--dark-color-ink); }

        /* Custom Cursor */
        .custom-cursor {
            position: fixed; top: 0; left: 0; width: 12px; height: 12px;
            background-color: var(--color-ink); border-radius: 50%;
            pointer-events: none; transform: translate(-50%, -50%);
            transition: transform 0.05s ease-out; z-index: 9999;
            box-shadow: 0 0 8px rgba(0, 0, 0, 0.3);
        }
        html.dark-mode .custom-cursor { background-color: var(--dark-color-ink); }
        @media (max-width: 768px) {
            body { cursor: default; }
            .custom-cursor { display: none; }
        }

        /* Birthday Notification Banner */
        #birthdayNotification {
            position: fixed; top: 0; left: 0; width: 100%; text-align: center;
            padding: 10px 0; font-family: 'Poppins', sans-serif; font-size: 1.1rem;
            z-index: 1000; display: none; box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            animation: slideDown 0.5s ease-out;
            background-color: var(--color-birthday-banner-bg);
            color: var(--color-birthday-banner-text);
        }
        html.dark-mode #birthdayNotification {
            background-color: var(--dark-color-birthday-banner-bg);
            color: var(--dark-color-birthday-banner-text);
        }
        #birthdayNotification.show { display: block; }
        #birthdayNotification button {
            background: none; border: none; font-size: 1.2rem; cursor: pointer;
            position: absolute; right: 10px; top: 50%; transform: translateY(-50%);
            color: var(--color-birthday-banner-text);
        }
        html.dark-mode #birthdayNotification button {
            color: var(--dark-color-birthday-banner-text);
        }
        @keyframes slideDown { from { transform: translateY(-100%); } to { transform: translateY(0); } }

        /* Modals */
        .modal-overlay {
            position: fixed; inset: 0; background: var(--color-modal-overlay-bg);
            display: flex; justify-content: center; align-items: center;
            z-index: 2000; opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        html.dark-mode .modal-overlay { background: var(--color-modal-overlay-dark); }
        .modal-overlay.show { opacity: 1; visibility: visible; }
        .modal-content {
            background: var(--color-modal-bg); color: var(--color-ink);
            padding: 1.875rem; border-radius: 0.9375rem; /* 30px, 15px */
            box-shadow: 0 0.3125rem 1.25rem rgba(0,0,0,0.3); /* 5px, 20px */
            text-align: center; max-width: 25rem; width: 90%;
            position: relative; transform: translateY(-1.25rem); opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        html.dark-mode .modal-content {
            background: var(--color-modal-bg-dark); color: var(--dark-color-ink);
        }
        .modal-overlay.show .modal-content { transform: translateY(0); opacity: 1; }
        .modal-content h3 { font-family: 'Lora', serif; font-size: 1.8rem; margin-top: 0; color: var(--color-blue-button); }
        html.dark-mode .modal-content h3 { color: var(--color-blue-button); } /* Keep original blue for vibrancy */
        .modal-content p { font-family: 'Poppins', sans-serif; font-size: 1.1rem; line-height: 1.5; margin-bottom: 1.25rem; }
        .modal-content ul { list-style: none; padding: 0; margin: 0; text-align: left; }
        .modal-content ul li {
            font-family: 'Poppins', sans-serif; font-size: 1rem; padding: 0.3125rem 0;
            border-bottom: 1px dashed var(--color-black-10);
        }
        html.dark-mode .modal-content ul li { border-bottom-color: var(--dark-color-black-10); }
        .modal-content ul li:last-child { border-bottom: none; }
        .modal-close-btn {
            background: none; border: none; font-size: 1.5rem; cursor: pointer;
            position: absolute; top: 0.625rem; right: 0.9375rem; /* 10px, 15px */
            color: var(--color-modal-close-btn);
        }
        html.dark-mode .modal-close-btn { color: var(--dark-color-modal-close-btn); }
        .modal-close-btn:hover { color: var(--color-tangerine); }

        /* Custom Message Box (replacing alert()) */
        #customMessageBox {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--color-message-box-bg);
            color: var(--color-message-box-text);
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 3000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        #customMessageBox.show {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(0);
        }
        #customMessageBox.info { background-color: var(--color-message-box-info); }
        #customMessageBox.success { background-color: var(--color-message-box-success); }
        #customMessageBox.error { background-color: var(--color-message-box-error); }
        #customMessageBox i { font-size: 1.2rem; }

        .gemini-button {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            background-color: var(--color-tangerine);
            color: white;
            padding: 0.75rem 1rem;
            border-radius: 9999px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.1s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .gemini-button:hover {
            background-color: #e66a00;
            transform: translateY(-1px);
        }
        .gemini-button:active {
            transform: translateY(0);
        }
        .gemini-button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            box-shadow: none;
        }

        .spinner {
            border: 2px solid rgba(255,255,255,0.3);
            border-top: 2px solid #fff;
            border-radius: 50%;
            width: 1rem;
            height: 1rem;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Styles for image placeholders */
        .card-image-placeholder {
            width: 100%;
            height: 150px; /* Fixed height for consistency */
            background-color: var(--color-black-10); /* Light background for images */
            border-radius: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden; /* Ensure image doesn't spill */
            margin-top: 1rem;
            object-fit: cover; /* Cover the area, crop if necessary */
        }
        html.dark-mode .card-image-placeholder {
            background-color: var(--dark-color-black-10);
        }
        .card-image-placeholder img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 0.75rem; /* Match parent border-radius */
        }
        .card-image-text {
            font-size: 0.9rem;
            color: var(--color-text-ink-60);
            text-align: center;
            padding: 0.5rem;
        }
        html.dark-mode .card-image-text {
            color: var(--dark-color-text-muted);
        }

        /* Styles for weather widget */
        .weather-widget-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%; /* Take full height of the card */
            padding: 1rem 0;
        }
        .weather-widget-content .icon {
            font-size: 3rem;
            margin-bottom: 0.5rem;
            color: var(--color-blue-button); /* Use a prominent color */
        }
        html.dark-mode .weather-widget-content .icon {
            color: var(--dark-color-blue-button);
        }
        .weather-widget-content .text {
            /* Removed specific font-size, font-weight, line-height, max-width */
            /* Keeping other properties for alignment */
            color: var(--color-ink);
            text-align: center;
            overflow: hidden; /* Ensure text doesn't overflow */
            text-overflow: ellipsis; /* Add ellipsis for overflow */
            display: -webkit-box;
            -webkit-line-clamp: 2; /* Limit to 2 lines */
            -webkit-box-orient: vertical;
        }
        html.dark-mode .weather-widget-content .text {
            color: var(--dark-color-ink);
        }
        .card.bg-coral .weather-widget-content .text {
            color: white; /* Text color for coral card */
        }

    </style>
</head>
<body>
    <!-- Decorative ribbons -->
    <div class="ribbon-decoration">
        <div class="ribbon-1"></div>
        <div class="ribbon-2"></div>
        <div class="slash-text">//</div>
    </div>

    <!-- Fixed action buttons (top right) -->
    <!-- For mobile, these buttons are now part of the nav-buttons group for better layout -->
    <div class="fixed-buttons-wrapper">
        <button id="themeToggleBtn" class="fixed-action-btn theme-toggle-btn" aria-pressed="false" aria-label="Toggle light/dark theme">
            <i class="fas fa-moon"></i>
        </button>
        <button id="birthdayInfoBtn" class="fixed-action-btn birthday-info-btn" aria-label="Show upcoming birthdays">
            <i class="fas fa-birthday-cake"></i>
        </button>
        <button id="calendarInfoBtn" class="fixed-action-btn calendar-info-btn" aria-label="Show calendar and holidays">
            <i class="fas fa-calendar-alt"></i>
        </button>
    </div>

    <!-- Birthday Notification Banner -->
    <div id="birthdayNotification">
        <span id="birthdayMessage"></span>
        <button id="closeBirthdayNotification"><i class="fas fa-times"></i></button>
    </div>

    <!-- Custom Message Box -->
    <div id="customMessageBox">
        <span id="customMessageIcon"></span>
        <span id="customMessageText"></span>
    </div>

    <!-- Upcoming Birthdays Modal -->
    <div id="upcomingBirthdaysModal" class="modal-overlay">
        <div class="modal-content">
            <button id="closeUpcomingBirthdaysModal" class="modal-close-btn"><i class="fas fa-times"></i></button>
            <h3>Upcoming Birthdays</h3>
            <p id="upcomingBirthdaysContent"></p>
        </div>
    </div>

    <!-- Calendar Modal (Coming Soon) -->
    <div id="calendarModal" class="modal-overlay">
        <div class="modal-content">
            <button id="closeCalendarModal" class="modal-close-btn"><i class="fas fa-times"></i></button>
            <h3>Our Mixed Calendar</h3>
            <p id="calendarContent">Ethiopian and International holidays coming soon... ðŸŽ‰</p>
        <p>This is where Ethiopian and International holidays will be displayed.</p>
        </div>
    </div>

    <!-- About Modal -->
    <div id="aboutModal" class="modal-overlay">
        <div class="modal-content">
            <button id="closeAboutModal" class="modal-close-btn"><i class="fas fa-times"></i></button>
            <h3>About UsRemind</h3>
            <p>This website was created to help Jay and Mah remember the little things and stay connected through shared memories. It features a custom time counter, daily messages, and upcoming special dates.</p>
            <p class="text-sm text-ink-60 mt-4">Built with love and code by your AI coding partner.</p>
        </div>
    </div>

    <!-- New Memories Modal -->
    <div id="memoriesModal" class="modal-overlay">
        <div class="modal-content">
            <button id="closeMemoriesModal" class="modal-close-btn"><i class="fas fa-times"></i></button>
            <h3>Our Shared Memories</h3>
            <p>This space is dedicated to all our cherished moments together. Soon, you'll find a timeline of our adventures, a gallery of our favorite photos, and more!</p>
            <p class="text-sm text-ink-60 mt-4">Stay tuned for more memories!</p>
        </div>
    </div>

    <!-- New Help Modal -->
    <div id="helpModal" class="modal-overlay">
        <div class="modal-content">
            <button id="closeHelpModal" class="modal-close-btn"><i class="fas fa-times"></i></button>
            <h3>Need a Hand?</h3>
            <p>Welcome to UsRemind! Here are some tips to get started:</p>
            <ul>
                <li>**Theme Toggle:** Click the <i class="fas fa-moon"></i> icon to switch between light and dark modes.</li>
                <li>**Birthdays:** The <i class="fas fa-birthday-cake"></i> icon alerts you to upcoming birthdays. Click it for details!</li>
                <li>**Calendar:** The <i class="fas fa-calendar-alt"></i> icon will show important dates and holidays.</li>
                <li>**Daily Message:** Get a new message every day on the main board.</li>
                <li>**Expand Cards:** Click on any card to view its content in more detail.</li>
            </ul>
            <p class="text-sm text-ink-60 mt-4">If you have more questions, feel free to ask!</p>
        </div>
    </div>


    <!-- Main card wrapper now contains both hero and main-card -->
    <div class="main-card-wrapper">
        <!-- The main-card div now wraps everything that should have the cream background -->
        <div class="main-card">
            <!-- soft pattern blobs -->
            <div class="pattern-blobs">
                <div class="blob-1"></div>
                <div class="blob-2"></div>
                <div class="blob-3"></div>
                <div class="blob-4"></div>
            </div>

            <!-- NAV is now inside main-card -->
            <div class="main-nav">
                <div class="logo-group">
                    <div class="logo-icon"></div>
                    <span class="logo-text">UsRemind</span>
                </div>
                <nav class="nav-links">
                    <a href="index.html">Board</a> <!-- Link to main page -->
                    <a href="#" id="navMemoriesLink">Memories</a> <!-- New Link with ID -->
                    <a href="#" id="navAboutLink">About</a>
                    <a href="#" id="navHelpLink">Help</a> <!-- New Link with ID -->
                </nav>
                <div class="nav-buttons">
                    <!-- Fixed action buttons are moved here for mobile responsiveness -->
                    <button id="themeToggleBtnMobile" class="fixed-action-btn theme-toggle-btn" aria-pressed="false" aria-label="Toggle light/dark theme">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button id="birthdayInfoBtnMobile" class="fixed-action-btn birthday-info-btn" aria-label="Show upcoming birthdays">
                        <i class="fas fa-birthday-cake"></i>
                    </button>
                    <button id="calendarInfoBtnMobile" class="fixed-action-btn calendar-info-btn" aria-label="Show calendar and holidays">
                        <i class="fas fa-calendar-alt"></i>
                    </button>
                    <!-- Removed menuButton -->
                </div>
            </div>

            <!-- HERO section is now the "front page" and inside main-card -->
            <div class="hero-section">
                <h1 class="hero-headline">REMEMBER THE LITTLE THINGS</h1>
                <p class="hero-subtext">A shared reminder space for two people who care about each other a lot.</p>
            </div>

            <!-- GRID -->
            <div class="main-grid-section">
                <div class="grid-container">

                    <!-- Card 1: Daily Message -->
                    <div class="card bg-white md:row-span-2">
                        <div class="card-text-muted">Today's Reminder</div>
                        <div class="card-text-muted -mt-1 mb-4">From our chat</div> <!-- Updated text -->
                        <div class="text-tangerine text-4xl mb-3 leading-none"><i class="fas fa-quote-left"></i></div>
                        <h3 class="card-title text-ink">
                            <span id="dailyMessage">Daily Text goes here...</span>
                        </h3>
                        <div class="flex gap-3 mt-4 justify-center flex-wrap">
                            <button id="copyBtn" class="control-btn bg-blue-button text-white px-4 py-2 rounded-full text-sm shadow-soft">
                                <i class="fas fa-copy mr-2"></i> Copy
                            </button>
                            <button id="shareBtn" class="control-btn bg-black-5 text-ink px-4 py-2 rounded-full text-sm">
                                <i class="fas fa-share-alt mr-2"></i> Share
                            </button>
                        </div>
                    </div>

                    <!-- Card 2: Our YouTube History -->
                    <div class="card bg-mustard">
                        <span class="inline-block text-xs font-semibold bg-black-10 text-ink px-3 py-1 rounded-full">Our History</span>
                        <h4 class="card-title text-ink mt-3">Our YouTube History</h4>
                        <div class="flex flex-col items-center justify-center mt-2">
                            <span id="youtubeHistoryContent" class="text-ink/80 text-sm uppercase text-center">Your shared YouTube watch history will appear here!</span>
                        </div>
                    </div>

                    <!-- Card 3: Weather Widget (Replaced Daily Affirmation) -->
                    <div class="card bg-coral">
                        <span class="inline-block text-xs font-semibold bg-white/20 text-white px-3 py-1 rounded-full">Daily Info</span>
                        <h4 class="card-title text-white mt-3">Weather Widget</h4>
                        <div class="weather-widget-content">
                            <i class="fas fa-cloud-sun game-icon icon"></i>
                            <!-- Removed the <p class="text"></p> element entirely -->
                        </div>
                    </div>

                    <!-- Card 4: Our Movies & Shows (Replaced Date Night Ideas) -->
                    <div class="card bg-sky">
                        <h4 class="card-title text-white">Our Movies & Shows</h4>
                        <div class="card-image-placeholder">
                            <img src="https://placehold.co/300x150/27C1F7/ffffff?text=Movies+%26+Shows" alt="Movies and Shows Placeholder">
                        </div>
                        <p class="card-image-text text-white/90">A collection of our favorite films and series.</p>
                    </div>

                    <!-- Card 5: Shared Images Coming Soon (Remains the same) -->
                    <div class="card bg-leaf">
                        <h4 class="card-title text-ink">Our Shared Images</h4>
                        <p class="card-body-text text-ink-80">A collection of our favorite moments.</p>
                        <div class="mt-5 bg-white rounded-2xl p-3 flex items-center justify-center gap-3">
                            <i class="fas fa-image text-4xl text-ink-60"></i>
                            <span class="text-ink text-sm font-semibold">Coming Soon...</span>
                        </div>
                    </div>

                    <!-- Card 6: Our Pinterest Boards (Replaced Special Dates) -->
                    <div class="card bg-fuchsia text-white">
                        <h4 class="card-title text-2xl font-semibold">Our Pinterest Boards</h4>
                        <div class="card-image-placeholder">
                            <img src="https://placehold.co/300x150/FF4FB8/ffffff?text=Pinterest+Boards" alt="Pinterest Boards Placeholder">
                        </div>
                        <p class="card-image-text text-white/90">Visual inspiration from our shared boards!</p>
                    </div>

                </div>
            </div>

            <!-- FOOTER STRIP -->
            <div class="footer-strip-section">
                <div class="footer-strip">
                    <div class="footer-text">Ready to have some fun?</div>
                    <div class="flex gap-3 mt-3 sm:mt-0">
                        <a href="kanban-board.html" class="footer-button-primary">Play some games</a>
                        <button id="aboutButton" class="footer-button-secondary">About</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Custom Cursor Element -->
    <div class="custom-cursor"></div>

    <script>
        // --- CONFIGURATION ---
        const startDate = new Date('2023-11-01T00:00:00'); // Your start date (no longer used for counter, but kept for reference)

        // START OF BIRTHDAYS LIST (Month is 0-indexed: Jan=0, Feb=1, ..., Dec=11)
        const birthdays = [
            { name: "Beamlak Samuel", month: 0, day: 1 }, // Jan 1
            { name: "Addae Madzimoyo", month: 0, day: 7 }, // Jan 7
            { name: "Tsionawit Abera Desta", month: 0, day: 15 }, // Jan 15
            { name: "Serukyas Tewahido", month: 1, day: 1 }, // Feb 1
            { name: "Mathewos Ayelework", month: 1, day: 10 }, // Feb 10
            { name: "Daniela Pirela-Manares", month: 1, day: 12 }, // Feb 12
            { name: "Meseret Kiros Alema", month: 1, day: 16 }, // Feb 16
            { name: "Biniyam (Jay's)", month: 1, day: 19 }, // Feb 19 (Yek 12)
            { name: "Marcon (Jay's)", month: 1, day: 21 }, // Feb 21
            { name: "Leul (Jay's)", month: 1, day: 28 }, // Feb 28
            { name: "Abyssinia Zewdie", month: 2, day: 5 }, // March 5
            { name: "Neveah Adams", month: 2, day: 7 }, // March 7
            { name: "Addishiwot Belew Dagnew", month: 2, day: 11 }, // March 11
            { name: "Fikir Yohannes", month: 2, day: 15 }, // March 15
            { name: "Beamlak Henok", month: 2, day: 18 }, // March 18
            { name: "David Minda", month: 2, day: 19 }, // March 19
            { name: "Senay (Jay's)", month: 2, day: 19 }, // March 19
            { name: "Yeabsira Tamirat", month: 2, day: 23 }, // March 23
            { name: "Sammy Senpai", month: 2, day: 28 }, // March 28
            { name: "Kimberly Hoang", month: 3, day: 10 }, // April 10
            { name: "Eyerusalem Assefa Shewago", month: 3, day: 13 }, // April 13
            { name: "Betselot Wogderes", month: 3, day: 20 }, // April 20
            { name: "Essey Araya", month: 3, day: 30 }, // April 30
            { name: "Beamlaksra Fasil", month: 4, day: 6 }, // May 6
            { name: "Bemnet Zekarias", month: 4, day: 14 }, // May 14
            { name: "Woinshet (Jay's)", month: 4, day: 21 }, // May 21
            { name: "Claudia Wanjira", month: 4, day: 30 }, // May 30
            { name: "Basleal (Jay's)", month: 5, day: 4 }, // June 4
            { name: "Solyana Tamirat", month: 5, day: 7 }, // June 7
            { name: "Betsinat Wogderes", month: 5, day: 18 }, // June 18
            { name: "Nahom Mesfin", month: 5, day: 20 }, // June 20
            { name: "Kamuskay Kamara", month: 5, day: 22 }, // June 22
            { name: "MOM", month: 5, day: 23 }, // June 23
            { name: "Abenezer (Jay's)", month: 5, day: 23 }, // June 23
            { name: "Biruktawit Yaze", month: 5, day: 26 }, // June 26
            { name: "Rekik Chernet", month: 6, day: 2 }, // July 2
            { name: "Hermona Desta", month: 6, day: 4 }, // July 4
            { name: "Minas (Jay's)", month: 6, day: 4 }, // July 4
            { name: "Lidya Lakew", month: 6, day: 11 }, // July 11
            { name: "Saratou Bako Bagassa", month: 6, day: 13 }, // July 13
            { name: "Dr. Carmen Lynas", month: 6, day: 26 }, // July 26
            { name: "Tsegi (Jay's)", month: 7, day: 1 }, // Aug 1
            { name: "Biruk Sintayehu Tolla", month: 7, day: 3 }, // Aug 3
            { name: "Providence Suenge", month: 7, day: 10 }, // Aug 10
            { name: "Melake Birhanu Negus", month: 7, day: 15 }, // Aug 15
            { name: "Yafet", month: 7, day: 18 }, // Aug 18
            { name: "Alazar (Jay's)", month: 8, day: 3 }, // Sep 3
            { name: "Yididya Merete", month: 8, day: 10 }, // Sep 10
            { name: "Liya Gebru", month: 8, day: 15 }, // Sep 15
            { name: "Micheal Adebusoye", month: 8, day: 20 }, // Sep 20
            { name: "Tesfaye Kefene", month: 8, day: 21 }, // Sep 21
            { name: "Arphaxad Nyabuto", month: 8, day: 25 }, // Sep 25
            { name: "Amar Asfaw Dilala", month: 8, day: 27 }, // Sep 27
            { name: "Nahom Ketsela", month: 8, day: 28 }, // Sep 28
            { name: "Osman Jalloh", month: 9, day: 2 }, // Oct 2
            { name: "Blen Tewodros Gulilat", month: 9, day: 10 }, // Oct 10
            { name: "Bateal Zimna", month: 9, day: 11 }, // Oct 11
            { name: "Beti (Jay's)", month: 9, day: 11 }, // Oct 11
            { name: "Daniela Villanueva-Tellez", month: 9, day: 16 }, // Oct 16
            { name: "Amogelang Dlamini", month: 9, day: 23 }, // Oct 23
            { name: "Pierre Diatta", month: 9, day: 28 }, // Oct 28
            { name: "Perle Fayida", month: 10, day: 4 }, // Nov 4
            { name: "Solome Misganaw", month: 10, day: 5 }, // Nov 5
            { name: "Berhane Wheeler", month: 10, day: 14 }, // Nov 14
            { name: "Esterline Charles", month: 10, day: 27 }, // Nov 27
            { name: "Gertrude Mbewe", month: 10, day: 28 }, // Nov 28
            { name: "Betelihem Befirdu", month: 10, day: 30 }, // Nov 30
            { name: "Nika Davenport", month: 10, day: 30 }, // Nov 30
            { name: "Hizkeal Yeshitla", month: 11, day: 4 }, // Dec 4
            { name: "Meron Yeshitla", month: 11, day: 4 }, // Dec 4
            { name: "Sami (Jay's)", month: 11, day: 4 }, // Dec 4
            { name: "Mam-mary SarrFox", month: 11, day: 5 }, // Dec 5
            { name: "Sara Naizghi", month: 11, day: 13 }, // Dec 13
            { name: "Naod Ksmu", month: 11, day: 23 }, // Dec 23
            { name: "Liya Belay Tessema", month: 11, day: 30 }, // Dec 30
            { name: "Laura Warren", month: 11, day: 31 } // Dec 31
        ];
        // END OF BIRTHDAYS LIST

        // List of initial daily messages (fallback if API fails or for initial load)
        const messages = [
            "You are the sunshine that brightens my day.",
            "Every moment with you is a treasure.",
            "My love for you grows stronger each day.",
            "You inspire me to be a better person.",
            "Thinking of you makes my heart smile.",
            "You are my favorite adventure.",
            "I'm so grateful for your presence in my life.",
            "Your kindness is a light in my world.",
            "Let's make today amazing together.",
            "You are beautiful inside and out."
        ];

        // List of initial affirmations for "Daily Affirmation"
        const affirmations = [
            "You are capable of amazing things.",
            "Every day is a fresh start.",
            "Your potential is limitless.",
            "You are strong and resilient.",
            "Believe in yourself and all that you are.",
            "You are worthy of love and happiness.",
            "Great things are coming your way.",
            "You are exactly where you need to be.",
            "Your efforts are leading to success.",
            "You are enough."
        ];

        // --- GEMINI API INTEGRATION ---
        const API_KEY = ""; // Canvas will provide this at runtime
        const TEXT_MODEL = "gemini-2.5-flash-preview-05-20";

        /**
         * Generic function to call Gemini API for text generation with exponential backoff.
         * @param {string} prompt The prompt for the LLM.
         * @param {number} retries Current retry count.
         * @returns {Promise<string>} The generated text.
         */
        async function generateTextWithGemini(prompt, retries = 0) {
            let chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
            const payload = { contents: chatHistory };
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${TEXT_MODEL}:generateContent?key=${API_KEY}`;

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    if (response.status === 429 && retries < 5) { // Too Many Requests, retry
                        const delay = Math.pow(2, retries) * 1000 + Math.random() * 500; // Exponential backoff with jitter
                        await new Promise(res => setTimeout(res, delay));
                        return generateTextWithGemini(prompt, retries + 1);
                    }
                    throw new Error(`API error: ${response.status} ${response.statusText}`);
                }

                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    return result.candidates[0].content.parts[0].text;
                } else {
                    throw new Error("No content found in Gemini API response.");
                }
            } catch (error) {
                console.error("Error generating text with Gemini:", error);
                throw error; // Re-throw to be caught by the calling function
            }
        }


        // --- UTILITY FUNCTIONS ---
        function getMonthName(monthIndex) {
            const monthNames = ["January", "February", "March", "April", "May", "June",
                "July", "August", "September", "October", "November", "December"];
            return monthNames[monthIndex];
        }

        /**
         * Displays a custom message box at the bottom of the screen.
         * @param {string} message The message to display.
         * @param {string} type The type of message ('info', 'success', 'error'). Affects background color and icon.
         */
        function showMessage(message, type = 'info') {
            const msgBox = document.getElementById('customMessageBox');
            const msgText = document.getElementById('customMessageText');
            const msgIcon = document.getElementById('customMessageIcon');

            msgText.textContent = message;
            msgBox.className = ''; // Clear existing classes
            msgBox.classList.add(type); // Add type class for styling

            // Set icon based on message type
            let iconClass = '';
            if (type === 'success') {
                iconClass = 'fas fa-check-circle';
            } else if (type === 'error') {
                iconClass = 'fas fa-exclamation-circle';
            } else {
                iconClass = 'fas fa-info-circle';
            }
            msgIcon.innerHTML = `<i class="${iconClass}"></i>`;


            msgBox.classList.add('show');

            // Hide the message after 3 seconds
            setTimeout(() => {
                msgBox.classList.remove('show');
            }, 3000);
        }

        /**
         * Sets the loading state for a button.
         * @param {HTMLButtonElement} button The button element.
         * @param {boolean} isLoading True to show loading, false to hide.
         */
        function setLoadingState(button, isLoading) {
            const spinner = button.querySelector('.spinner');
            if (isLoading) {
                button.disabled = true;
                if (spinner) spinner.style.display = 'inline-block';
                button.dataset.originalContent = button.innerHTML; // Store original innerHTML
                button.innerHTML = `<span class="spinner"></span> Loading...`;
            } else {
                button.disabled = false;
                if (spinner) spinner.style.display = 'none';
                button.innerHTML = button.dataset.originalContent; // Restore original innerHTML
            }
        }

        // --- CORE LOGIC FUNCTIONS ---
        /**
         * Sets the daily message from the hardcoded array.
         */
        function setDailyMessage() {
            const dailyMessageSpan = document.getElementById('dailyMessage');
            const now = new Date();
            const startOfYear = new Date(now.getFullYear(), 0, 0);
            const diff = now - startOfYear;
            const oneDay = 1000 * 60 * 60 * 24;
            const dayOfYear = Math.floor(diff / oneDay);
            const messageIndex = dayOfYear % messages.length;
            dailyMessageSpan.textContent = messages[messageIndex];
        }

        /**
         * Sets the daily affirmation from the hardcoded array.
         */
        function setDailyAffirmation() {
            // This function is no longer used as Daily Affirmation is replaced by Weather Widget
            // but keeping it here for reference if needed in other contexts.
            const dailyAffirmationSpan = document.getElementById('dailyAffirmation');
            const now = new Date();
            const startOfYear = new Date(now.getFullYear(), 0, 0);
            const diff = now - startOfYear;
            const oneDay = 1000 * 60 * 60 * 24;
            const dayOfYear = Math.floor(diff / oneDay);
            const affirmationIndex = dayOfYear % affirmations.length;
            dailyAffirmationSpan.textContent = affirmations[affirmationIndex];
        }

        /**
         * Generates and displays a date idea using Gemini API.
         * This function is no longer called as Date Night Ideas is replaced by Movies & Shows card.
         */
        async function generateDateIdea() {
            const dateIdeaParagraph = document.getElementById('dateIdea');
            const generateButton = document.getElementById('generateDateIdeaBtn');
            setLoadingState(generateButton, true);

            try {
                const prompt = "Suggest a unique, romantic, and fun date night idea for a couple. Make it brief and engaging.";
                const idea = await generateTextWithGemini(prompt);
                dateIdeaParagraph.textContent = idea;
                showMessage("New date idea generated! âœ¨", "success");
            } catch (error) {
                dateIdeaParagraph.textContent = "Couldn't fetch a date idea right now. Try again later!";
                showMessage("Failed to generate date idea. Please try again later.", "error");
                console.error("Error in generateDateIdea:", error);
            } finally {
                setLoadingState(generateButton, false);
            }
        }

        function checkBirthdayToday() {
            const today = new Date();
            const currentMonth = today.getMonth();
            const currentDay = today.getDate();
            let birthdayFound = false;
            let birthdayNames = [];
            for (const person of birthdays) {
                if (person.month === currentMonth && person.day === currentDay) {
                    birthdayNames.push(person.name);
                    birthdayFound = true;
                }
            }
            const birthdayNotification = document.getElementById('birthdayNotification');
            const birthdayMessageSpan = document.getElementById('birthdayMessage');
            if (birthdayFound) {
                birthdayMessageSpan.textContent = `Happy Birthday, ${birthdayNames.join(' and ')}! ï¿½`;
                birthdayNotification.classList.add('show');
            } else {
                birthdayNotification.classList.remove('show');
            }
        }

        function getUpcomingBirthdays() {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const thirtyDaysFromNow = new Date();
            thirtyDaysFromNow.setDate(today.getDate() + 30);
            thirtyDaysFromNow.setHours(23, 59, 59, 999);
            const upcomingList = [];
            for (const person of birthdays) {
                let nextBirthday = new Date(today.getFullYear(), person.month, person.day);
                if (nextBirthday.getTime() < today.getTime()) {
                    // If birthday has passed this year, check for next year
                    nextBirthday.setFullYear(today.getFullYear() + 1);
                }
                if (nextBirthday.getTime() >= today.getTime() && nextBirthday.getTime() <= thirtyDaysFromNow.getTime()) {
                    upcomingList.push({ name: person.name, date: nextBirthday });
                }
            }
            upcomingList.sort((a, b) => a.date.getTime() - b.date.getTime()); // Sort by date
            if (upcomingList.length === 0) {
                return "<p>No birthdays coming up soon! You can relax. ðŸ˜Š</p>";
            } else {
                let htmlList = "<ul>";
                const options = { month: 'long', day: 'numeric' };
                for (const item of upcomingList) {
                    htmlList += `<li><strong>${item.name}</strong>: ${item.date.toLocaleDateString(undefined, options)}</li>`;
                }
                htmlList += "</ul>";
                return htmlList;
            }
        }

        function checkUpcomingBirthdayAlert() {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const thirtyDaysFromNow = new Date();
            thirtyDaysFromNow.setDate(today.getDate() + 30);
            thirtyDaysFromNow.setHours(23, 59, 59, 999);
            let hasUpcoming = false;
            for (const person of birthdays) {
                let nextBirthday = new Date(today.getFullYear(), person.month, person.day);
                if (nextBirthday.getTime() < today.getTime()) {
                    nextBirthday.setFullYear(today.getFullYear() + 1);
                }
                if (nextBirthday.getTime() >= today.getTime() && nextBirthday.getTime() <= thirtyDaysFromNow.getTime()) {
                    hasUpcoming = true;
                    break;
                }
            }
            const birthdayInfoBtn = document.getElementById('birthdayInfoBtn');
            const birthdayInfoBtnMobile = document.getElementById('birthdayInfoBtnMobile'); // Get mobile button too

            // Consistent update for both desktop and mobile buttons
            const updateBirthdayButton = (btn) => {
                if (btn) {
                    if (hasUpcoming) {
                        btn.classList.add('alert');
                    } else {
                        btn.classList.remove('alert');
                    }
                }
            };

            updateBirthdayButton(birthdayInfoBtn);
            updateBirthdayButton(birthdayInfoBtnMobile);
        }

        function showUpcomingBirthdays() {
            const upcomingBirthdaysModal = document.getElementById('upcomingBirthdaysModal');
            const upcomingBirthdaysContent = document.getElementById('upcomingBirthdaysContent');
            upcomingBirthdaysContent.innerHTML = getUpcomingBirthdays();
            upcomingBirthdaysModal.classList.add('show');
        }

        function showCalendarModal() {
            const calendarModal = document.getElementById('calendarModal');
            const calendarContent = document.getElementById('calendarContent');
            calendarContent.textContent = "Ethiopian and International holidays coming soon... ðŸŽ‰";
            calendarModal.classList.add('show');
        }

        function showAboutModal() {
            const aboutModal = document.getElementById('aboutModal');
            aboutModal.classList.add('show');
        }

        function showMemoriesModal() {
            const memoriesModal = document.getElementById('memoriesModal');
            memoriesModal.classList.add('show');
        }

        function showHelpModal() {
            const helpModal = document.getElementById('helpModal');
            helpModal.classList.add('show');
        }

        function toggleTheme() {
            document.documentElement.classList.toggle('dark-mode'); /* Apply to html element */
            const isDark = document.documentElement.classList.contains('dark-mode');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');

            // Function to update button icon and aria-pressed state
            const updateThemeButton = (btn) => {
                if (btn) {
                    btn.setAttribute('aria-pressed', isDark);
                    btn.querySelector('i').className = `fas ${isDark ? 'fa-sun' : 'fa-moon'}`;
                }
            };

            // Update desktop and mobile theme toggle buttons
            updateThemeButton(document.getElementById('themeToggleBtn'));
            updateThemeButton(document.getElementById('themeToggleBtnMobile'));
        }

        // --- CARD EXPANSION LOGIC ---
        let expandedCard = null; // To keep track of the currently expanded card

        function expandCard(cardElement) {
            if (expandedCard) { // If another card is already expanded, collapse it first
                collapseCard();
            }

            expandedCard = cardElement;
            expandedCard.classList.add('is-expanded');
            
            // Create and show backdrop
            const backdrop = document.createElement('div');
            backdrop.classList.add('backdrop');
            document.body.appendChild(backdrop);
            
            // Force reflow to ensure transition plays
            void backdrop.offsetWidth; 
            backdrop.classList.add('is-active');

            // Disable body scrolling
            document.body.classList.add('no-scroll');

            // Close card on backdrop click
            backdrop.addEventListener('click', collapseCard);
            // Close card on card click (unless it's an interactive element inside)
            expandedCard.addEventListener('click', handleExpandedCardClick);
        }

        function handleExpandedCardClick(event) {
            // Prevent collapsing if a button or link inside the card is clicked
            if (event.target.closest('button') || event.target.closest('a')) {
                event.stopPropagation(); // Don't let the click bubble up to the card itself
                return;
            }
            collapseCard();
        }

        function collapseCard() {
            if (expandedCard) {
                expandedCard.classList.remove('is-expanded');
                
                const backdrop = document.querySelector('.backdrop');
                if (backdrop) {
                    backdrop.classList.remove('is-active');
                    backdrop.addEventListener('transitionend', () => {
                        backdrop.remove(); // Remove backdrop after transition
                    }, { once: true });
                }

                document.body.classList.remove('no-scroll');
                expandedCard.removeEventListener('click', handleExpandedCardClick);
                expandedCard = null;
            }
        }


        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            setDailyMessage(); // Initial message from hardcoded array
            // setDailyAffirmation(); // No longer needed, replaced by weather widget

            // Apply saved theme on load
            const storedTheme = localStorage.getItem('theme');
            if (storedTheme === 'dark') {
                document.documentElement.classList.add('dark-mode');
            }

            // Theme toggle button listeners (desktop and mobile)
            const themeToggleBtn = document.getElementById('themeToggleBtn');
            const themeToggleBtnMobile = document.getElementById('themeToggleBtnMobile');

            // Initialize theme toggle button states
            const initializeThemeButton = (btn) => {
                if (btn) {
                    const isDark = document.documentElement.classList.contains('dark-mode');
                    btn.setAttribute('aria-pressed', isDark);
                    btn.querySelector('i').className = `fas ${isDark ? 'fa-sun' : 'fa-moon'}`;
                    btn.addEventListener('click', toggleTheme);
                }
            };
            initializeThemeButton(themeToggleBtn);
            initializeThemeButton(themeToggleBtnMobile);

            // Birthday and Calendar features initialization
            checkBirthdayToday();
            checkUpcomingBirthdayAlert();

            const closeBirthdayNotificationBtn = document.getElementById('closeBirthdayNotification');
            if (closeBirthdayNotificationBtn) {
                closeBirthdayNotificationBtn.addEventListener('click', () => {
                    document.getElementById('birthdayNotification').classList.remove('show');
                });
            }

            // Birthday info button listeners (desktop and mobile)
            const birthdayInfoBtn = document.getElementById('birthdayInfoBtn');
            const birthdayInfoBtnMobile = document.getElementById('birthdayInfoBtnMobile');

            if (birthdayInfoBtn) {
                birthdayInfoBtn.addEventListener('click', showUpcomingBirthdays);
            }
            if (birthdayInfoBtnMobile) {
                birthdayInfoBtnMobile.addEventListener('click', showUpcomingBirthdays);
            }

            const closeUpcomingBirthdaysModalBtn = document.getElementById('closeUpcomingBirthdaysModal');
            const upcomingBirthdaysModal = document.getElementById('upcomingBirthdaysModal');
            if (closeUpcomingBirthdaysModalBtn) {
                closeUpcomingBirthdaysModalBtn.addEventListener('click', () => {
                    upcomingBirthdaysModal.classList.remove('show');
                });
            }
            if (upcomingBirthdaysModal) {
                upcomingBirthdaysModal.addEventListener('click', (event) => {
                    if (event.target === upcomingBirthdaysModal) { // Only close if clicking on the overlay itself
                        upcomingBirthdaysModal.classList.remove('show');
                    }
                });
            }

            // Calendar info button listeners (desktop and mobile)
            const calendarInfoBtn = document.getElementById('calendarInfoBtn');
            const calendarInfoBtnMobile = document.getElementById('calendarInfoBtnMobile');

            if (calendarInfoBtn) {
                calendarInfoBtn.addEventListener('click', showCalendarModal);
            }
            if (calendarInfoBtnMobile) {
                calendarInfoBtnMobile.addEventListener('click', showCalendarModal);
            }

            const closeCalendarModalBtn = document.getElementById('closeCalendarModal');
            const calendarModal = document.getElementById('calendarModal');
            if (closeCalendarModalBtn) {
                closeCalendarModalBtn.addEventListener('click', () => {
                    calendarModal.classList.remove('show');
                });
            }
            if (calendarModal) {
                calendarModal.addEventListener('click', (event) => {
                    if (event.target === calendarModal) { // Only close if clicking on the overlay itself
                        calendarModal.classList.remove('show');
                    }
                });
            }

            // About button functionality (footer and nav link)
            const aboutButton = document.getElementById('aboutButton');
            if (aboutButton) {
                aboutButton.addEventListener('click', showAboutModal);
            }
            const navAboutLink = document.getElementById('navAboutLink');
            if (navAboutLink) {
                navAboutLink.addEventListener('click', (e) => {
                    e.preventDefault(); // Prevent default link behavior
                    showAboutModal();
                });
            }
            const closeAboutModal = document.getElementById('closeAboutModal');
            if (closeAboutModal) {
                closeAboutModal.addEventListener('click', () => {
                    document.getElementById('aboutModal').classList.remove('show');
                });
            }
            const aboutModal = document.getElementById('aboutModal');
            if (aboutModal) {
                aboutModal.addEventListener('click', (event) => {
                    if (event.target === aboutModal) { // Only close if clicking on the overlay itself
                        aboutModal.classList.remove('show');
                    }
                });
            }

            // New Memories Modal listeners
            const navMemoriesLink = document.getElementById('navMemoriesLink');
            if (navMemoriesLink) {
                navMemoriesLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    showMemoriesModal();
                });
            }
            const closeMemoriesModalBtn = document.getElementById('closeMemoriesModal');
            const memoriesModal = document.getElementById('memoriesModal');
            if (closeMemoriesModalBtn) {
                closeMemoriesModalBtn.addEventListener('click', () => {
                    memoriesModal.classList.remove('show');
                });
            }
            if (memoriesModal) {
                memoriesModal.addEventListener('click', (event) => {
                    if (event.target === memoriesModal) {
                        memoriesModal.classList.remove('show');
                    }
                });
            }

            // New Help Modal listeners
            const navHelpLink = document.getElementById('navHelpLink');
            if (navHelpLink) {
                navHelpLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    showHelpModal();
                });
            }
            const closeHelpModalBtn = document.getElementById('closeHelpModal');
            const helpModal = document.getElementById('helpModal');
            if (closeHelpModalBtn) {
                closeHelpModalBtn.addEventListener('click', () => {
                    helpModal.classList.remove('show');
                });
            }
            if (helpModal) {
                helpModal.addEventListener('click', (event) => {
                    if (event.target === helpModal) {
                        helpModal.classList.remove('show');
                    }
                });
            }


            // Copy and Share button functionality
            const copyBtn = document.getElementById('copyBtn');
            const shareBtn = document.getElementById('shareBtn');
            const dailyMessageSpan = document.getElementById('dailyMessage'); // Get reference to the span holding the daily message

            if (copyBtn) {
                copyBtn.addEventListener('click', () => {
                    const text = dailyMessageSpan.textContent;
                    const tempInput = document.createElement('textarea');
                    tempInput.value = text;
                    document.body.appendChild(tempInput);
                    tempInput.select();
                    try {
                        document.execCommand('copy');
                        showMessage('Message copied!', 'success'); // Using custom message box
                    } catch (err) {
                        console.error('Failed to copy text: ', err);
                        showMessage('Could not copy message. Please try manually.', 'error'); // Using custom message box
                    }
                    document.body.removeChild(tempInput);
                });
            }

            if (shareBtn) {
                shareBtn.addEventListener('click', async () => {
                    const text = dailyMessageSpan.textContent;
                    if (navigator.share) {
                        try {
                            await navigator.share({ title: 'UsRemind Message', text, url: window.location.href });
                        } catch (err) { /* user cancelled or other error */
                            if (err.name !== 'AbortError') { // Don't show error for user cancellation
                                console.error('Failed to share:', err);
                                showMessage('Failed to share message.', 'error');
                            }
                        }
                    } else {
                        showMessage('Web Share API not supported on this device. Please copy manually.', 'info'); // Using custom message box
                    }
                });
            }

            // Gemini API Buttons Event Listeners for Date Idea (only one remaining)
            // This button is no longer present in the HTML, so this listener will not attach.
            const generateDateIdeaBtn = document.getElementById('generateDateIdeaBtn');
            if (generateDateIdeaBtn) {
                generateDateIdeaBtn.addEventListener('click', generateDateIdea);
            }

            // Custom Cursor Logic
            const customCursor = document.querySelector('.custom-cursor');
            if (customCursor) {
                document.addEventListener('mousemove', (e) => {
                    if (window.innerWidth > 768) { // Only show custom cursor on larger screens
                        customCursor.style.transform = `translate(${e.clientX}px, ${e.clientY}px)`;
                    }
                });
            }

            // Add event listeners for card expansion
            document.querySelectorAll('.grid-container .card').forEach(card => {
                // Attach click listener to the card itself, but only if it's not the "Play some games" link
                // or if it's not the "About" button in the footer.
                // This ensures that the card expansion doesn't interfere with existing navigation.
                card.addEventListener('click', (event) => {
                    // Prevent card expansion if a direct child button or link is clicked
                    if (event.target.closest('button') || event.target.closest('a')) {
                        return; // Do nothing, let the button/link handle its own click
                    }
                    expandCard(card);
                });
            });
        });

        // The setJokeOfTheDay function definition remains here, though it's no longer called
        // as there's no corresponding HTML element for it in the current layout.
        function setJokeOfTheDay() {
            const now = new Date();
            const startOfYear = new Date(now.getFullYear(), 0, 0);
            const diff = now - startOfYear;
            const oneDay = 1000 * 60 * 60 * 24;
            const dayOfYear = Math.floor(diff / oneDay);
            const jokeIndex = dayOfYear % jokes.length;
            const jokeElement = document.getElementById('jokeOfTheDay');
            if (jokeElement) {
                jokeElement.textContent = jokes[jokeIndex];
            }
        }
    </script>
</body>
</html>
ï¿½
